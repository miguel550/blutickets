language: python
cache: pip
python:
- 3.6
env:
- DJANGO_SETTINGS_MODULE=blutickets.settings.test
install:
- pip install flake8
- pip install -r requirements.txt
before_script:
- flake8 . --exclude migrations,node_modules,settings,manage.py,__init__.py --max-line-length=120
  --ignore=E901,E126,E127,E121
script:
- celery -A blutickets worker -l info&
- python manage.py test
services:
- rabbitmq
deploy:
  provider: heroku
  app:
    master: prod-blutickets
    dev: dev-blutickets
    feature-redesign: redesign-blutickets
  api_key:
    secure: qx7Z25UGWcOrp1lSddDV4UAafSeiLmjzWsfKB+funvz+zxffjuyd0j7oMOwxyl9glEuLx6C51VwL4G1lwmN+HVDWbnY0nIeXg0WIsp/QkQY3yOHcuoGy4BWMhsxflwVrBSG0TtMrt3ZLzqf4aV7T74VjEnSpU4GalY1k9rI6iKTp6329YeE3UR3J8Yy7MAhs6gjBlgsMnF6mGLqz2zrRO7YDzkY2uNQPRd0lYgM/8P1697cw6BiJBSVekAMnwHhRydGSN3W22xFts2sbetIS9Uzxu7sYbMONjR9UiaAO1BbjLRCo/ZUn7X7xXflvCAsmzAfWwtoyObdwAHAJJBQBygBjaz9Kjvd/Zs5UvfT+WJEmWs66A7pXa0HVexeJMqD23GCXhGFM/WnegScjGVJ/vB1dXqdcDU7w0TDMea74G8Arck78pCI/sIinszCOqBr7pBT0vYhdHBQBiujnRQO9Vd54v+z9ZvvIN4FZLPy1RnrhHTsjeaSkYAd2bfYR2eIKTG6NSMt4GaP+p2XENJV3l8kfUQ0yvgZpKgg8TAC9o3OqGeRw7+N4ZwHNBjR797wPBAKgikmLxsPElxcxiPfnabcS1/sZnzdiu7Q9kBu6z0dwq0C4mv4kQKnnKy9H12uubsNo1/8SW2qBs17n1OEOmuiPqdhCKhAfUWNiCZP4/RA=
notifications:
  slack: blutickets:2yPWlEHDWn8TCi0DgT0UhWjH
