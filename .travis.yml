language: python
cache: pip
python:
- 3.6
env:
- DJANGO_SETTINGS_MODULE=blutickets.settings.test
install:
- pip install flake8
- pip install -r requirements.txt
before_script:
- flake8 . --exclude migrations,node_modules,settings,manage.py,__init__.py --max-line-length=120
  --ignore=E901,E126,E127,E121
script:
- celery -A blutickets worker -l info&
- python manage.py test
services:
- rabbitmq
deploy:
  provider: heroku
  app:
    master: prod-blutickets
    dev: dev-blutickets
    feature-redesign: redesign-blutickets
  api_key:
    secure: paYLF7RzRPp8zUBAT8jK8xPGVxeQVr5/iSVkh975J3VUDxgafUD99QhXEfzxTsuAzNARwml+/cOu2tnWtu3D2bNFiS0Rkwlvj5DvmlcODm+cScnZJeN57eUhMo3kP+h2q4by38r0ymeXbl9Mmk3QNkEShax+Gkd8jWr5jH6Jfk8ZZ5HhEiD9KXZihz2fM1gn/ujBmBt5XGLXHg1j1qpNTVwdtxjhYMqLfGxrpyWKXeYtvVVwHz9S66bP3q/mS0w+1C4sWShN9GaVkHJYqK1cNN9jNKcJzxnK0mv4jEYnVccwyvVCKIksAchb0cH+QF6638iUfV/0+gz0a38MeXtIG64hX9TcyXk0b+X+J6HyyD0z1Z/u1lmk5VS6ayujDm9sG9iUZz6ANFmv4COhlFrV6RyAG6MZGGDgL9yhvqZftgCXAPG6WpWZ4Mol09VluP5qEUf0XlMdVzqOYIhd1jG1uuq7h76iFTQWxZh7fsdmU1d8tGEKbp0XlOiuCek7fRA0qBbWuMR/BP2DqeiGRsNZJSe0tq7mU2wzD8V5PLJ6/oDWP6VkZ3PYdMtkSIaQsDZN1jZjHVFBYah8euZqj0sG58iPPfNSK0rV7UTtx3HLPq5pUkZnImSsdeeHAROex8lFW1iRoqfnEH/RdfS27kIBa8FhNBkUFdvMyTqGFmQebL8=
notifications:
  slack: blutickets:2yPWlEHDWn8TCi0DgT0UhWjH
